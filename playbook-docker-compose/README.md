# Ansible playbook + docker compose

Тестовое задание:

Разработать Ansible плейбук, который на удаленном сервере запустит докеризированное веб-приложение.

Требования:

1. Стек приложения: nginx, php, mysql.
2. Использовать docker-compose.
3. Плейбук должен распространять необходимые для работы файлы.
4. Плейбук должен генерировать конфигурационный файл для nginx и, при необходимости,
перезапускать его сервис.

## Преднастройки

1. Для запуска создайте тестовую среду с двумя физическими/виртуальными Linux машинами: *контроллером* с установленным Ansible и *удаленным сервером* с установленными docker/docker compose. Между машинами должна быть сетевая связность, чтобы Ansible мог запустить плейбук.
2. На удаленном сервере настройте пользователя для исполнения плейбуков, например ansible, для которого, как минимум:

    - настроена авторизация по SSH-ключу с контроллера;
    - отключен доступ по паролю для повышения безопасности (необязательно, если среда считается безопасной);
    - пользователь включен в группу docker.

3. Заполните переменные в файлах *variables.yml*, *inventory.yml* и *docker/.env*.

## Запуск плейбука

После клонирования репозитория перейдите в папку playbook-docker-compose. При запуске плейбука укажите файл inventory:

```sh
ansible-playbook playbook.yml -i inventory.yml
```

После запуска плейбука php-приложение (в данном случае WordPress) должно быть доступно с контроллера по адресу удаленного сервера. Иногда веб-страница прогружается не сразу, и нужно подождать несколько секунд.
